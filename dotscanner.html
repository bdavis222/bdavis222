<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8" />
    <link rel="stylesheet" href="styles.css">
    <title>Dot Scanner</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7393715984324246"
     crossorigin="anonymous"></script>
  </head>
  <body>
    <h1>
      Dot Scanner
    </h1>
    <p class="subtitle">
      Software designed for analysis of microscope imaging data
    </p>
    <div class="donate-button-container">
      <div class="center-in-donate-button-container">
        <a href="https://www.paypal.com/donate/?business=UA5NL9MJSFMVY">
          <img class="donate-button" src="https://img.shields.io/badge/Donate-PayPal-green.svg" alt="Donate button">
        </a>
      </div>
    </div>
    <p>
      Dot Scanner is designed to simplify analysis of microscope imaging data. 
      The program runs entirely within a window-based graphical user interface, 
      so as to not require any programming knowledge from the user in order to 
      complete their image analysis (see the images below for examples). 
      This software is especially useful for noisy image data, where manual 
      "by-eye" analysis is unreliable.
    </p>
    <p>
      Donations are appreciated, but not required.
    </p>
    <hr>
    <h2>
      Getting Started
    </h2>
    <h3>
      Dependencies
    </h3>
    <ul>
      <li>
        <a href="https://www.python.org/downloads/">Python 3</a> 
        must be installed before Dot Scanner can be installed.
      </li>
    </ul>
    <h3>
      Installation
    </h3>
    <p>
      To install Dot Scanner, open a terminal window and run the following command:
    </p>
    <code>
      pip install dotscanner
    </code>
    <p>
      <em>
        (Note that the <code>pip3</code> command may be required instead of <code>pip</code> 
        for some Python installations.)
      </em>
    </p>
    <h3>
      Running the Software
    </h3>
    <p>
      To launch the main graphical user interface (GUI), run the following command:
    </p>
    <code>
      dotscanner
    </code>
    <hr>
    <h2>
      The Configurations Window
    </h2>
    <p>
      The first window displayed in the GUI is the Configurations Window:
    </p>
    <a href="assets/images/dotscanner/3.png">
      <img class="bordered-image" src="assets/images/dotscanner/3.png" alt="Configurations window image" loading="lazy">
    </a>
    <p>
      If the File or Folder buttons are clicked, another window opens, allowing the user to select 
      a file or folder for analysis:
    </p>
    <a href="assets/images/dotscanner/4.png">
      <img class="bordered-image" src="assets/images/dotscanner/4.png" alt="File browsing image" loading="lazy">
    </a>
    <p>
      If repeated analysis is being performed at the same target filepath, the user can avoid continuously 
      repeating this step by setting a default filepath. This is done by clicking the "Edit defaults" 
      button. An entire configurations file is editable for other defaults as well. Any of the variables 
      in this configurations file can be modified to change the default behavior of the software.
    </p>
    <p>
      The software will run as expected on any folder where the most common file extension within the 
      folder belongs to the images wanting to be analyzed. By default, the entire folder will be scanned, 
      and the most common file type found within the folder will be set as the file type to analyze. If the 
      user is experiencing issues with the wrong file type being selected, it is recommended that they reorganize 
      their data into folders containing only their images to be analyzed.
    </p>
    <p>
      If a folder containing several images is selected, the user has the option to change the default program 
      from <b>Density</b> to <b>Lifetime</b> 
      <em>
        (Note that trying to run a lifetime program on a single image will not be allowed by the software.)
      </em> 
      This selection is made through the <b>Program</b> dropdown menu:
    </p>
    <a href="assets/images/dotscanner/5.png">
      <img class="bordered-image" src="assets/images/dotscanner/5.png" alt="Selecting lifetime image" loading="lazy">
    </a>
    <p>
      If <b>Lifetime</b> is selected, some additional options will appear:
    </p>
    <a href="assets/images/dotscanner/6.png">
      <img class="bordered-image" src="assets/images/dotscanner/6.png" alt="Lifetime options image" loading="lazy">
    </a>
    <h3>
      Descriptions of Configuration Options
    </h3>
    <h4>
      Save Figures
    </h4>
    <p>
      Selecting this option will output graphical plots to a <code>figures</code> folder that will be 
      created within the folder containing the data being analyzed. These plots serve to allow the user 
      to quickly verify their selections made during analysis.
    </p>
    <h4>
      Blob size
    </h4>
    <p>
      This option sets the radius (or, more accurately, roughly the half width of a square) of exclusion 
      around "blobs" (in pixels). Blobs are regions of the image that are saturated and overexposed. 
      For example, if the blob size is set to 5, then a square region extending 5 pixels in each 
      direction (left, right, up, and down) will be defined from each overexposed pixel (meaning the 
      square will span 11 pixels on each side, including the central pixel), and all of the pixels within 
      those regions will be ignored during analysis. This ensures that the “dots” (the dimmer particles of 
      interest in the image) are not too close to any of these regions, and thus the outer edges of blobs 
      are not confused as dots.
    </p>
    <h4>
      Dot size
    </h4>
    <p>
      Similar to the blob size option, this sets the size of a "dot" in the dataset. Because dots should 
      not overlap, the larger the dot size, the fewer dots will be detected, as dimmer pixels within a 
      brighter dot's region will not be recognized as dots, and will therefore be removed.
    </p>
    <h4>
      Thresholds
    </h4>
    <p>
      There are three thresholds that can be set to adjust the detection sensitivity for "dots" and 
      "blobs" in a given image. The three editable text boxes correspond to the following variables 
      (displayed from left to right in the Configurations Window):
    </p>
    <ul>
      <li>
        <code>LOWER_DOT_THRESH_SCALE</code>: Scaling for the lower threshold defining the brightness of the dots. 
        The default is 1.5, which corresponds to 1.5 standard deviations above the mean of the data. 
        Lower this value to increase the number of faint dots detected, or raise it to reduce the number.
      </li>
      <li>
        <code>UPPER_DOT_THRESH_SCALE</code>: Scaling for the upper threshold defining the brightness of the dots. 
        The default is 5, which corresponds to 5 standard deviations above the mean. 
        Lower this value to reduce the number of bright dots detected, or raise it to increase the number.
      </li>
      <li>
        <code>LOWER_BLOB_THRESH_SCALE</code>: Scaling for the lower threshold defining the brightness of the blobs. 
        The default is 2, which corresponds to 2 times the value of <code>UPPER_DOT_THRESH_SCALE</code>. 
        Lower this value to increase the number of blobs detected, or raise it to reduce the number.
      </li>
    </ul>
    <h4>
      Edit defaults
    </h4>
    <p>
      This opens a new window that allows the user to edit the default filepath or edit/reset the 
      entire configuration file directly.
    </p>
    <h4>
      Use previous settings
    </h4>
    <p>
      This opens a new window that allows the user to browse for a previous .txt analysis file to 
      use to repeat analysis. Information on which settings are reused during re-analysis is included 
      in the header of each analysis file. There are two main scenarios for using this feature:
    </p>
    <ul>
      <li>
        <b>Re-analyzing the same image or set of images.</b> <i>This is useful if the user wants to tweak one or 
        two parameters of an analysis without running through the entire folder of images one by one again.</i>
      </li>
      <li>
        <b>Analyzing a new image or set of images with the same analysis settings as a previous analysis.</b> 
        <i>This is useful if the user has already run analysis on a set of green images and wants to run the 
        exact same analysis on their red counterparts, for example.</i>
      </li>
    </ul>
    <p>
      Clicking Next, or pressing the return key on the keyboard, will save the user’s selections and open 
      the Threshold Adjustment Window.
    </p>
    <h3>
      Descriptions of Configuration Options for the Lifetime Program
    </h3>
    <h4>
      Start image
    </h4>
    <p>
      This option sets the first image to be considered in a lifetime calculation. The default is the 
      first image in the folder (as the images <em>must be numbered sequentially</em>).
    </p>
    <h4>
      Skips allowed
    </h4>
    <p>
      This sets the number of consecutive images that are allowed to be skipped in a lifetime calculation. 
      This can be useful for dimmer dots where an image or two in a series are relatively out of focus, 
      resulting in an unwanted non-detection for those frames. By increasing the number of skips allowed, 
      these particles will be retained as long as they are back in focus and bright enough for detection 
      in subsequent frames.
    </p>
    <h4>
      Remove edge frames
    </h4>
    <p>
      This dictates whether edge frames should be removed from a lifetime calculation. If a particle is 
      detected in the first frame of an image, for example, it cannot be determined whether the particle 
      existed before the first image was taken, so it might not make sense to include this in a lifetime 
      calculation (and the same may also be true for particles in the last frame). If the number of skips 
      allowed in the lifetime calculation is greater than zero, this will increase how many edge frames 
      are removed from analysis.
    </p>
    <hr>
    <h2>
      The Threshold Adjustment Window
    </h2>
    <p>
      Clicking the Next button, or pressing the return key on the keyboard, from the Configurations 
      Window saves the configuration settings selected by the user and advances to the Threshold 
      Adjustment Window. This window shows the image data with the dots and blobs identified, and 
      features several button groups on the left sidebar:
    </p>
    <a href="assets/images/dotscanner/7.png">
      <img class="bordered-image" src="assets/images/dotscanner/7.png" alt="Threshold adjustment image" loading="lazy">
    </a>
    <p>
      From top to bottom, these button groups perform the following actions:
    </p>
    <h4>
      View
    </h4>
    <p>
      These buttons allow four different viewing options: zooming in on the top left, top right, 
      bottom left, bottom right, or zooming back out to show the full image. The user can also 
      press the spacebar on the keyboard to cycle through these different views.
    </p>
    <h4>
      Contrast
    </h4>
    <p>
      These buttons adjust the contrast of the image.
    </p>
    <h4>
      Dots
    </h4>
    <p>
      These buttons adjust the sensitivity for detecting “dots” in the image (the fainter, smaller 
      dots, as opposed to the much brighter and larger “blobs”). The user can also press the up 
      and down arrow keys on the keyboard to make these adjustments.
    </p>
    <h4>
      Blobs
    </h4>
    <p>
      These buttons adjust the sensitivity for detecting “blobs” in the image. The user can also 
      press the right and left arrow keys on the keyboard to make these adjustments. <em>Note: since 
      increasing the blob sensitivity changes the threshold between blobs and dots, this results 
      in a different number of dots being detected as well.</em>
    </p>
    <h4>
      Edit
    </h4>
    <p>
      This button changes the left button bar view to display some manual threshold and size adjustment 
      options:
    </p>
    <a href="assets/images/dotscanner/8.png">
      <img class="bordered-image" src="assets/images/dotscanner/8.png" alt="Threshold adjustment edit image" loading="lazy">
    </a>
    <p>
      <em>
        (Once the thresholds or sizes are changed by entering new numbers into the text boxes, clicking 
        the Done button, or pressing the return key on the keyboard, saves the settings and returns the 
        left button bar to the original button configuration.)
      </em>
    </p>
    <h4>
      Reset
    </h4>
    <p>
      This button resets the adjusted thresholds back to the default values.
    </p>
    <h4>
      Skip
    </h4>
    <p>
      This button skips the current image (for example, if the user decides the data quality is not 
      sufficient for measurement). The escape key on the keyboard can also be pressed to perform a skip.
    </p>
    <hr>
    <h2>
      The Region Selector Window
    </h2>
    <p>
      Clicking the Done button, or pressing the return key on the keyboard, from the main Threshold 
      Adjustment Window saves the threshold settings selected by the user and advances to the Region 
      Selector Window:
    </p>
    <a href="assets/images/dotscanner/9.png">
      <img class="bordered-image" src="assets/images/dotscanner/9.png" alt="Region selection image" loading="lazy">
    </a>
    <p>
      This window allows the user to click different locations on the image to set the vertices of a 
      polygon within which the measurements will be made. At any point, the polygon can be reset by 
      clicking the Reset button, or by pressing the backspace key on the keyboard. It is important 
      to note that after at least three vertices have been placed, the dotted line shows how the program 
      will enclose the polygon once the Done button, or the return key on the keyboard, is pressed. 
      (In other words, it is not necessary to re-click the first vertex created to close the polygon.)
    </p>
    <p>
      Information about the image processing will be displayed in the terminal, including progress bars 
      to estimate the time to completion of longer processes, like lifetime calculations and the saving 
      of multiple figures.
    </p>
    <p>
      <em>
        Note: the extraneous +[CATransaction synchronize] output in the terminal window is a known bug 
        in macOS 13 that will not affect your data.
      </em>
    </p>
    <hr>
    <h2>
      Citations
    </h2>
    <p>
      When using this program on data used in published works, please cite:
    </p>
    <p>
      Allen, H., Davis, B., Patel, J., & Gu, Y. 2023 (in prep.)
    </p>
    <hr>
    <h2>
      Development
    </h2>
    <p>
      To contribute to the project, please visit the project's 
      <a href="https://github.com/bdavis222/dot-scanner">GitHub page</a>.
    </p>
    <hr>
    <footer>&copy; Copyright 2023 Brian Davis and Holly Allen. All Rights Reserved.</footer>
  </body>
</html>
